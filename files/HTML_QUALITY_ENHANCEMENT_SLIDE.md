# HTML 생성 품질 고도화

---

## 슬라이드 레이아웃

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  [헤더] HTML 생성 품질 고도화: Vision 기반 검수 체계                          │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────┐     ┌─────────────────────────────┐       │
│  │         현재 (LLM)          │     │      고도화 (Vision)        │       │
│  │                             │     │                             │       │
│  │  ┌─────────────────────┐   │     │  ┌─────────────────────┐   │       │
│  │  │     HTML 코드       │   │     │  │  Puppeteer 렌더링   │   │       │
│  │  └──────────┬──────────┘   │     │  └──────────┬──────────┘   │       │
│  │             │              │     │             │              │       │
│  │             ▼              │     │             ▼              │       │
│  │  ┌─────────────────────┐   │     │  ┌─────────────────────┐   │       │
│  │  │   LLM 텍스트 분석   │   │     │  │   실제 스크린샷     │   │       │
│  │  └──────────┬──────────┘   │     │  └──────────┬──────────┘   │       │
│  │             │              │     │             │              │       │
│  │             ▼              │     │             ▼              │       │
│  │       PASS / FAIL          │     │  ┌─────────────────────┐   │       │
│  │                             │     │  │  🧠 Vision Agent    │   │       │
│  │  ❌ 렌더링 결과와 괴리      │     │  └──────────┬──────────┘   │       │
│  │  ❌ 재시도 비효율           │     │             │              │       │
│  │  ❌ 정확도 70%              │     │    ┌───────┼───────┐      │       │
│  │                             │     │    ▼       ▼       ▼      │       │
│  │                             │     │  병렬 검수 노드 (4개)     │       │
│  │                             │     │                             │       │
│  │                             │     │  ✅ 정확도 95%+            │       │
│  │                             │     │  ✅ 검수 시간 1/4          │       │
│  │                             │     │  ✅ 품질 점수 90+          │       │
│  └─────────────────────────────┘     └─────────────────────────────┘       │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 현재 방식의 한계

| 문제점 | 설명 |
|:---|:---|
| **렌더링 괴리** | LLM이 HTML 코드만 보고 판단 → 실제 화면과 다를 수 있음 |
| **재시도 비효율** | 품질과 무관하게 고정 3회 재시도 |
| **오류 패턴 미학습** | 같은 실수 반복, 개선 없음 |
| **정확도 한계** | 약 70% 수준 |

---

## 고도화 방향

### 1. Vision 기반 실제 렌더링 검수

```
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│   [현재]                         [고도화]                           │
│                                                                     │
│   HTML 코드                      HTML 코드                          │
│      │                              │                               │
│      ▼                              ▼                               │
│   LLM이 코드 분석              Puppeteer 렌더링                     │
│      │                              │                               │
│      ▼                              ▼                               │
│   추론 기반 판단               실제 스크린샷 캡처                    │
│                                     │                               │
│                                     ▼                               │
│                               Vision이 이미지 분석                  │
│                                     │                               │
│                                     ▼                               │
│                               정확한 시각적 판단                     │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

| 항목 | LLM 기반 | Vision 기반 |
|:---|:---:|:---:|
| 입력 | HTML 코드 | **실제 스크린샷** |
| 분석 방식 | 텍스트 추론 | **시각적 분석** |
| 정확도 | 70% | **95%+** |

---

### 2. Vision Agent + 병렬 검수 아키텍처

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                          ┌─────────────────┐                                │
│                          │    Screenshot   │                                │
│                          └────────┬────────┘                                │
│                                   │                                         │
│                                   ▼                                         │
│                    ┌──────────────────────────────┐                         │
│                    │      🧠 Vision Agent          │                         │
│                    │      (두뇌 역할)              │                         │
│                    │   4개 검수 노드에 동시 분배   │                         │
│                    └───────────────┬──────────────┘                         │
│                                    │                                        │
│              ┌─────────────────────┼─────────────────────┐                  │
│              │                     │                     │                  │
│              ▼                     ▼                     ▼                  │
│      ┌─────────────┐       ┌─────────────┐       ┌─────────────┐           │
│      │  Overflow   │       │   Image     │       │    Text     │           │
│      │   Checker   │       │   Checker   │       │   Checker   │           │
│      │             │       │             │       │             │           │
│      │ 콘텐츠 넘침 │       │ 이미지 잘림 │       │ 텍스트 가독 │           │
│      │    확인     │       │ 비율 왜곡   │       │   성 확인   │           │
│      └──────┬──────┘       └──────┬──────┘       └──────┬──────┘           │
│             │                     │                     │                   │
│             │     ┌─────────────┐ │                     │                   │
│             │     │   Margin    │ │                     │                   │
│             │     │   Checker   │ │                     │                   │
│             │     │  여백 균형  │ │                     │                   │
│             │     └──────┬──────┘ │                     │                   │
│             │            │        │                     │                   │
│             └────────────┼────────┼─────────────────────┘                   │
│                          │        │                                         │
│                          ▼        ▼                                         │
│                    ┌──────────────────────┐                                 │
│                    │   Score Aggregator   │                                 │
│                    │                      │                                 │
│                    │  4개 점수 평균 계산  │                                 │
│                    │  → 최종 품질 점수    │                                 │
│                    └──────────────────────┘                                 │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 병렬 처리 효과

| 항목 | 순차 처리 | 병렬 처리 |
|:---|:---:|:---:|
| 검수 시간 | 4초 | **1초** |
| 프롬프트 | 하나에 모든 검사 | **전문화된 개별 프롬프트** |
| 디버깅 | 불명확 | **노드별 결과 추적** |
| 확장성 | 프롬프트 복잡화 | **노드만 추가** |

---

### 3. 품질 점수 기반 동적 재시도

```
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│   [현재] 고정 재시도               [고도화] 동적 재시도             │
│                                                                     │
│   품질 점수 무관                   품질 점수 기반 판단              │
│   무조건 3회                                                        │
│                                    ┌─────────────────────────┐      │
│   ┌────────────────┐              │   Score >= 85점         │      │
│   │  재시도 1회    │              │   → 즉시 통과           │      │
│   │  재시도 2회    │              ├─────────────────────────┤      │
│   │  재시도 3회    │              │   Score 70~84점         │      │
│   │  → 종료       │              │   → 최대 2회 재시도     │      │
│   └────────────────┘              ├─────────────────────────┤      │
│                                    │   Score < 70점          │      │
│                                    │   → 최대 5회 재시도     │      │
│                                    └─────────────────────────┘      │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

### 4. 오류 패턴 학습 + 템플릿 라이브러리

```
┌─────────────────────────────────────────────────────────────────────┐
│                                                                     │
│   [오류 패턴 학습]                                                   │
│                                                                     │
│   빈번한 오류 추적:                                                  │
│   • overflow 발생 → "padding 설정 필수" 지시 추가                    │
│   • 이미지 왜곡 → "object-fit: contain 사용" 지시 추가               │
│   • 텍스트 작음 → "최소 14px 이상" 지시 추가                         │
│                                                                     │
│   → 프롬프트에 회피 지시 자동 추가                                   │
│                                                                     │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│   [템플릿 라이브러리]                                                │
│                                                                     │
│   품질 점수 90점 이상 HTML 저장                                      │
│   → 유사 요청 시 참조 템플릿으로 제공                                │
│   → 성공 패턴 재활용                                                 │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

---

## 기대 효과 (수치)

| 지표 | 현재 | 고도화 후 |
|:---|:---:|:---:|
| 검수 정확도 | 70% | **95%+** |
| 검수 시간 | 4초 | **1초** |
| 최종 품질 점수 | 75점 | **90점+** |
| 평균 재시도 횟수 | 2.5회 | **1.2회** |

---

## 발표 대본

"마지막으로 **HTML 생성 품질 고도화**입니다.

현재의 **LLM 기반 검수**는 HTML 코드만 보고 판단하기 때문에, **실제 렌더링 결과와 괴리**가 있고 **효율적인 재시도**가 어렵습니다.

이를 개선하기 위해 **Vision 기반 검수 체계**를 도입하겠습니다.
Puppeteer로 HTML을 **실제로 렌더링**하고, 그 **스크린샷**을 Vision이 분석합니다.
이를 통해 검수 **정확도를 95% 이상**으로 끌어올리겠습니다.

특히 **Vision 에이전트**를 중심으로 4가지 검수 항목을:
- 오버플로우 확인
- 이미지 잘림/왜곡
- 텍스트 가독성
- 여백 균형

이 4개를 **병렬 처리**하는 아키텍처를 구축해 **검수 시간을 1/4로 단축**하겠습니다.

또한 **오류 패턴 학습**으로 빈번한 실수를 회피하고, **템플릿 라이브러리**를 통해 성공 패턴을 재활용합니다.

최종적으로 **품질 점수 90점 이상**의 완성도 높은 결과물을 보장하겠습니다."
